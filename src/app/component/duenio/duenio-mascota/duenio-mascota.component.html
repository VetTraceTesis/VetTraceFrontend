<div *ngIf="showForm" class="mascota-detail">
  <div class="profile-details">
    <!-- Contenedor circular para la imagen -->
    <div class="profile-photo">
      <div class="image-wrapper">
        <!-- Vista previa -->
        <img
          *ngIf="previewUrl"
          [src]="previewUrl"
          alt="Vista previa de la mascota"
          class="mascota-image"
        />

        <!-- Imagen existente desde BD -->
        <img
          *ngIf="!previewUrl && newMascota.rutaimagen"
          [src]="'http://102.37.216.79:80' + newMascota.rutaimagen"
          alt="Imagen actual"
          class="mascota-image"
        />
      </div>
      <input type="file" (change)="onFileSelected($event)" accept="image/*" />
    </div>

    <!-- Formulario -->
    <div class="profile-info">
      <h3>Añadir nueva mascota</h3>

      <form (ngSubmit)="submitForm()" #mascotaForm="ngForm">
        <!-- Nombre -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nombre Mascota</mat-label>
          <input matInput type="text" name="nombre" [(ngModel)]="newMascota.nombre" required />
        </mat-form-field>

      <!-- Especie -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Especie</mat-label>
        <mat-select [(ngModel)]="newMascota.especie" name="especie" required>
          <mat-option *ngFor="let especie of especiesComunes" [value]="especie">
            {{ especie }}
          </mat-option>
        </mat-select>
      </mat-form-field>


        <!-- Edad -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Edad</mat-label>
          <input matInput type="number" name="edad" [(ngModel)]="newMascota.edad" required />
        </mat-form-field>

        <!-- Fecha nacimiento -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Fecha de Nacimiento</mat-label>
          <input
            matInput
            [matDatepicker]="picker"
            name="fecharegistro"
            [(ngModel)]="newMascota.fecharegistro"
            required
          />
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <!-- Ocultos -->
        <input type="hidden" name="duenioId" [(ngModel)]="newMascota.duenioId" />
        <input type="hidden" name="idEstado" [(ngModel)]="newMascota.idEstado" />

        <!-- Botón -->
        <div class="botons-style">
          <button mat-flat-button color="primary" type="submit" [disabled]="mascotaForm.invalid">
            Guardar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
